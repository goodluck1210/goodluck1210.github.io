{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport Fuse from 'fuse.js';\nimport { useDebouncedCallback } from 'use-debounce';\nimport validator from '../../utils/validation/validateEmail';\nimport { MainLayoutBorders } from '../../components/MainLayout/MainLayoutBorders';\nimport ArticlePreview from '../../components/Blog/ArticlePreview/ArticlePreview';\nimport Subscription from '../../components/Blog/Subscription/Subscription';\nimport Header from '../../components/Blog/Header/Header';\nimport PaginationComp from '../../components/Blog/Pagination/Pagination';\nimport CTA from '../../components/ReusableComponents/CTA/CTA';\nimport { en } from '../../config/en.js';\nimport { meta } from '../../config/metadata';\nimport routing from '../../config/routing';\nimport SubscriptionService from '../../services/subscription';\nimport { fuseOptions, blogFilters } from '../../config/constants';\nimport styles from '../../styles/pages/blog.module.scss';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction Blog(_ref) {\n  var blogArticles = _ref.blogArticles,\n      canonicalLink = _ref.canonicalLink;\n  var blog = en.blog,\n      receiveNotifications = en.receiveNotifications,\n      subscribe = en.subscribe;\n  var filteredByCategories = [];\n\n  var _useState = useState(''),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(''),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState(''),\n      debouncedSearch = _useState3[0],\n      setDebouncedSearch = _useState3[1];\n\n  var _useState4 = useState(''),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(false),\n      isConfirmed = _useState5[0],\n      setConfirmed = _useState5[1];\n\n  var router = useRouter();\n  var query = router.query,\n      pathname = router.pathname,\n      asPath = router.asPath; //pagination\n\n  var pageNumber = query.page ? Number(query.page) : 1;\n  var PER_PAGE = 12;\n\n  var _useState6 = useState(0),\n      firstSliceValue = _useState6[0],\n      setFirstSliceValue = _useState6[1];\n\n  var _useState7 = useState(PER_PAGE),\n      secondSliceValue = _useState7[0],\n      setSecondSliceValue = _useState7[1];\n\n  useEffect(function () {\n    if (pageNumber > Math.ceil(filteredByCategories.length / PER_PAGE) || asPath.includes('page=1')) {\n      router.replace(pathname);\n    }\n  }, []);\n  useEffect(function () {\n    setFirstSliceValue(pageNumber * PER_PAGE - PER_PAGE);\n    setSecondSliceValue(pageNumber * PER_PAGE);\n  }, [pageNumber]); // end pagination\n\n  var category = router.pathname === routing().blog ? blogFilters[0].name : router.pathname.replace(\"\".concat(routing().blog, \"/\"), '');\n  var uppercaseCategory = \"\".concat(category[0].toUpperCase()).concat(category.slice(1));\n  var currentArticle = blogFilters.find(function (item) {\n    return item.name === category;\n  }); // filtration by search or categories\n\n  blogArticles.filter(function (article) {\n    if (category === blogFilters[0].name) {\n      filteredByCategories.push(article);\n    }\n\n    if (article.category.some(function (cat) {\n      return cat.toLowerCase() === category;\n    })) {\n      filteredByCategories.push(article);\n    }\n\n    if (search === '') {\n      return blogArticles;\n    }\n\n    if (debouncedSearch) {\n      var fuse = new Fuse(filteredByCategories, fuseOptions);\n      filteredByCategories = fuse.search(debouncedSearch).map(function (el) {\n        return el.item;\n      });\n      return filteredByCategories;\n    }\n\n    return filteredByCategories;\n  });\n  var handleDebounseSearch = useDebouncedCallback(function (value) {\n    setDebouncedSearch(value);\n  }, 400);\n\n  var handleSearchChange = function handleSearchChange(value) {\n    setSearch(value);\n    handleDebounseSearch.callback(value);\n  };\n\n  var handleSubscriptionChange = function handleSubscriptionChange(_ref2) {\n    var target = _ref2.target;\n\n    if (error) {\n      setError('');\n    }\n\n    setEmail(target.value);\n  };\n\n  useEffect(function () {\n    if (validator.validate(email)) {\n      setError('');\n    }\n  }, [email]);\n\n  var handleSubmit = function handleSubmit() {\n    if (validator.validate(email)) {\n      SubscriptionService.subscribe(email, setConfirmed, setEmail, setError);\n    } else {\n      setError('Invalid email address!');\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(MainLayoutBorders, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsxs(\"title\", {\n        children: [currentArticle.metaTitle || \"Software Development Company Blog \".concat(uppercaseCategory), ' ', \"- Page \", pageNumber, \" | WTT Solutions\"]\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: \"\".concat(meta.blogDescription, \" \").concat(uppercaseCategory === 'All' ? '' : \"- \".concat(uppercaseCategory), \" | Page \").concat(pageNumber)\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"canonical\",\n        href: canonicalLink || 'https://wtt-solutions.com/blog'\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.headerWrapper,\n      children: [/*#__PURE__*/_jsxs(\"h1\", {\n        className: styles.blog,\n        children: [blog, \" \", uppercaseCategory !== 'All' ? uppercaseCategory : '', ' ', (uppercaseCategory === 'All' || uppercaseCategory === 'Insights') && \"page \".concat(pageNumber)]\n      }), /*#__PURE__*/_jsx(Header, {\n        handleChange: function handleChange(e) {\n          return handleSearchChange(e.target.value);\n        },\n        setSearchValue: setSearch,\n        searchValue: search\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.contentWrapper,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.middleLine\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.deskLines,\n        children: [/*#__PURE__*/_jsx(\"div\", {}), /*#__PURE__*/_jsx(\"div\", {})]\n      }), /*#__PURE__*/_jsx(ArticlePreview, {\n        data: filteredByCategories.slice(firstSliceValue, secondSliceValue),\n        searchValue: debouncedSearch,\n        activeFilter: category\n      }), filteredByCategories.length > PER_PAGE && /*#__PURE__*/_jsx(PaginationComp, {\n        pathname: pathname,\n        totalPages: Math.ceil(filteredByCategories.length / PER_PAGE),\n        pageNumber: pageNumber\n      }), /*#__PURE__*/_jsx(Subscription, {\n        error: error,\n        emailValue: email,\n        handleChange: handleSubscriptionChange,\n        handleSubmit: handleSubmit,\n        title: receiveNotifications,\n        btnTitle: subscribe,\n        isConfirmed: isConfirmed\n      })]\n    }), /*#__PURE__*/_jsx(CTA, {\n      CTATitle: en.CTATitle\n    })]\n  });\n}\n\nexport var __N_SSP = true;\nexport default Blog;","map":null,"metadata":{},"sourceType":"module"}