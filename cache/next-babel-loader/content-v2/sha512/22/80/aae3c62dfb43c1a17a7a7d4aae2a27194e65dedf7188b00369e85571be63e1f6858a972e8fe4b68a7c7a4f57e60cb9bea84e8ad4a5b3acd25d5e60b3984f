{"ast":null,"code":"import { useEffect } from 'react';\nimport Router from 'next/router';\n\nfunction saveScrollPos(url, shouldScrollRestore) {\n  if (window.innerWidth > 1199) {\n    let slide = sessionStorage.getItem('slide');\n    const scrollPos = {\n      y: window.innerHeight * slide,\n      slide: slide\n    };\n    sessionStorage.setItem(url, JSON.stringify(scrollPos));\n    sessionStorage.setItem('shouldScrollRestore', shouldScrollRestore || false);\n  } else {\n    let scrollY = sessionStorage.getItem('scrollY');\n    const scrollPos = {\n      y: scrollY\n    };\n    sessionStorage.setItem(url, JSON.stringify(scrollPos));\n  }\n}\n\nfunction restoreScrollPos(url) {\n  const scrollPos = JSON.parse(sessionStorage.getItem(url));\n\n  if (scrollPos && !url.includes('blog')) {\n    window.scrollTo({\n      top: scrollPos.y\n    });\n  }\n}\n\nexport default function useScrollRestoration(router) {\n  useEffect(() => {\n    if ('scrollRestoration' in window.history) {\n      let shouldScrollRestore = false;\n      window.history.scrollRestoration = 'manual';\n      restoreScrollPos(router.asPath);\n\n      const onBeforeUnload = event => {\n        saveScrollPos(router.asPath);\n        delete event['returnValue'];\n      };\n\n      const onRouteChangeStart = () => {\n        saveScrollPos(router.asPath, shouldScrollRestore);\n      };\n\n      const onRouteChangeComplete = url => {\n        if (shouldScrollRestore) {\n          shouldScrollRestore = false;\n          restoreScrollPos(url);\n        }\n      };\n\n      window.addEventListener('beforeunload', onBeforeUnload);\n      Router.events.on('routeChangeStart', onRouteChangeStart);\n      Router.events.on('routeChangeComplete', onRouteChangeComplete);\n      Router.beforePopState(() => {\n        shouldScrollRestore = true;\n        return true;\n      });\n      return () => {\n        window.removeEventListener('beforeunload', onBeforeUnload);\n        Router.events.off('routeChangeStart', onRouteChangeStart);\n        Router.events.off('routeChangeComplete', onRouteChangeComplete);\n        Router.beforePopState(() => true);\n      };\n    }\n  }, [router]);\n}","map":{"version":3,"sources":["E:/corporate-website/hooks/useScrollRestoration.js"],"names":["useEffect","Router","saveScrollPos","url","shouldScrollRestore","window","innerWidth","slide","sessionStorage","getItem","scrollPos","y","innerHeight","setItem","JSON","stringify","scrollY","restoreScrollPos","parse","includes","scrollTo","top","useScrollRestoration","router","history","scrollRestoration","asPath","onBeforeUnload","event","onRouteChangeStart","onRouteChangeComplete","addEventListener","events","on","beforePopState","removeEventListener","off"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\r\n\r\nimport Router from 'next/router';\r\n\r\nfunction saveScrollPos(url, shouldScrollRestore) {\r\n  if (window.innerWidth > 1199) {\r\n    let slide = sessionStorage.getItem('slide');\r\n    const scrollPos = { y: window.innerHeight * slide, slide: slide };\r\n    sessionStorage.setItem(url, JSON.stringify(scrollPos));\r\n    sessionStorage.setItem('shouldScrollRestore', shouldScrollRestore || false);\r\n  } else {\r\n    let scrollY = sessionStorage.getItem('scrollY');\r\n    const scrollPos = { y: scrollY };\r\n    sessionStorage.setItem(url, JSON.stringify(scrollPos));\r\n  }\r\n}\r\n\r\nfunction restoreScrollPos(url) {\r\n  const scrollPos = JSON.parse(sessionStorage.getItem(url));\r\n  if (scrollPos && !url.includes('blog') ) {\r\n    window.scrollTo({\r\n      top: scrollPos.y,\r\n    });\r\n  }\r\n}\r\n\r\nexport default function useScrollRestoration(router) {\r\n  useEffect(() => {\r\n    if ('scrollRestoration' in window.history) {\r\n      let shouldScrollRestore = false;\r\n      window.history.scrollRestoration = 'manual';\r\n      restoreScrollPos(router.asPath);\r\n\r\n      const onBeforeUnload = (event) => {\r\n        saveScrollPos(router.asPath);\r\n        delete event['returnValue'];\r\n      };\r\n\r\n      const onRouteChangeStart = () => {\r\n        saveScrollPos(router.asPath, shouldScrollRestore);\r\n      };\r\n\r\n      const onRouteChangeComplete = (url) => {\r\n        if (shouldScrollRestore) {\r\n          shouldScrollRestore = false;\r\n          restoreScrollPos(url);\r\n        }\r\n      };\r\n\r\n      window.addEventListener('beforeunload', onBeforeUnload);\r\n      Router.events.on('routeChangeStart', onRouteChangeStart);\r\n      Router.events.on('routeChangeComplete', onRouteChangeComplete);\r\n      Router.beforePopState(() => {\r\n        shouldScrollRestore = true;\r\n        return true;\r\n      });\r\n\r\n      return () => {\r\n        window.removeEventListener('beforeunload', onBeforeUnload);\r\n        Router.events.off('routeChangeStart', onRouteChangeStart);\r\n        Router.events.off('routeChangeComplete', onRouteChangeComplete);\r\n        Router.beforePopState(() => true);\r\n      };\r\n    }\r\n  }, [router]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}