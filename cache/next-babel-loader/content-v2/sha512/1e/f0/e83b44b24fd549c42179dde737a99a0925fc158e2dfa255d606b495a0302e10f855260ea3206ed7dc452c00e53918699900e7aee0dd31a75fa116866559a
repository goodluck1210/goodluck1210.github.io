{"ast":null,"code":"var _jsxFileName = \"E:\\\\corporate-website\\\\components\\\\Scroll\\\\Scroll.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { withRouter } from \"next/router\"; // utils\n\nimport PropTypes from \"prop-types\";\nimport animatedScrollTo from \"./utils/animated-scroll-to\";\nimport isMobileDevice from \"./utils/is-mobile\";\nimport { getObjectValues } from \"./utils/helpers\";\nimport S from \"./style/scroll.module.scss\";\nimport { caseSidebarEventListener, clientsAboutUsBtnEventListeners } from \"./utils/eventListeners\"; // Components\n\nimport ScrollSection from \"./ScrollSection\";\nimport ScrollControls from \"./ScrollControls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst scrollMode = {\n  FULL_PAGE: \"full-page\",\n  NORMAL: \"normal\"\n};\nexport class Scroll extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onResize\", () => {\n      this._slides = [];\n\n      if (window.innerWidth < 1200 || window.innerHeight < 411) {\n        this._scrollMode = scrollMode.NORMAL;\n      } else this._scrollMode = scrollMode.FULL_PAGE;\n\n      for (let i = 0; i < this._slidesCount; i++) {\n        this._slides.push(window.innerHeight * i);\n      }\n\n      this.setState({\n        height: window.innerHeight\n      });\n    });\n\n    _defineProperty(this, \"onTouchStart\", evt => {\n      this._touchStart = evt.touches[0].clientY;\n      this._isScrolledAlready = false;\n    });\n\n    _defineProperty(this, \"onTouchMove\", evt => {\n      if (this._scrollMode !== scrollMode.FULL_PAGE) {\n        return;\n      }\n\n      evt.preventDefault();\n      const touchEnd = evt.changedTouches[0].clientY;\n\n      if (!this._isScrollPending && !this._isScrolledAlready) {\n        if (this._touchStart > touchEnd + this._touchSensitivity) {\n          this.scrollToSlide(this.state.activeSlide + 1);\n        } else if (this._touchStart < touchEnd - this._touchSensitivity) {\n          this.scrollToSlide(this.state.activeSlide - 1);\n        }\n      }\n    });\n\n    _defineProperty(this, \"onScroll\", evt => {\n      if (this._scrollMode !== scrollMode.FULL_PAGE) {\n        return;\n      }\n\n      evt.preventDefault();\n\n      if (this._isScrollPending) {\n        return;\n      }\n\n      const scrollDown = (evt.wheelDelta || -evt.deltaY || -evt.detail) < 0;\n\n      if (scrollDown) {\n        this.scrollToSlide(this.state.activeSlide + 1);\n      } else {\n        this.scrollToSlide(this.state.activeSlide - 1);\n      }\n    });\n\n    _defineProperty(this, \"getSlidesCount\", () => this._slidesCount);\n\n    _defineProperty(this, \"getCurrentSlideIndex\", () => this.state.activeSlide);\n\n    _defineProperty(this, \"scrollNext\", () => {\n      this.scrollToSlide(this.state.activeSlide + 1);\n    });\n\n    _defineProperty(this, \"scrollPrev\", () => {\n      this.scrollToSlide(this.state.activeSlide - 1);\n    });\n\n    _defineProperty(this, \"scrollToSlide\", slide => {\n      if (!this._isScrollPending && slide >= 0 && slide < this._slidesCount) {\n        const currentSlide = this.state.activeSlide;\n        this.props.beforeChange({\n          from: currentSlide,\n          to: slide\n        });\n        sessionStorage.setItem(\"slide\", slide);\n        this.setState({\n          activeSlide: slide\n        });\n        this._isScrollPending = true;\n        animatedScrollTo(this._slides[slide], this.props.duration, () => {\n          this._isScrollPending = false;\n          this._isScrolledAlready = true;\n          this.props.afterChange({\n            from: currentSlide,\n            to: slide\n          });\n        });\n      }\n    });\n\n    _defineProperty(this, \"scrollToSlideTablet\", slide => {\n      const elem = document.getElementById(`caseSection-${slide}`);\n      this.setState({\n        activeSlide: slide\n      });\n      sessionStorage.setItem(\"slide\", slide);\n      elem.scrollIntoView({\n        block: \"start\",\n        behavior: \"smooth\"\n      });\n    });\n\n    this._isScrollPending = false;\n    this._isScrolledAlready = false;\n    this._slides = [];\n    this._slidesCount = Scroll.getChildrenCount(this.props.children) + this.props.additionalElements;\n    this._touchSensitivity = 5;\n    this._touchStart = 0;\n    this._isMobile = null;\n    this._scrollMode = scrollMode.FULL_PAGE;\n    this.state = {\n      activeSlide: props.initialSlide\n    };\n  }\n\n  componentDidMount() {\n    // scroll to previous page slide\n    const shouldScrollRestore = JSON.parse(sessionStorage.getItem(\"shouldScrollRestore\"));\n    const scrollPos = JSON.parse(sessionStorage.getItem(this.props.router.asPath));\n\n    if (shouldScrollRestore && scrollPos) {\n      this.setState({\n        activeSlide: +scrollPos.slide\n      });\n      sessionStorage.setItem(\"slide\", scrollPos.slide);\n\n      if (window.innerWidth < 1200) {\n        window.scroll(0, +scrollPos.y);\n      }\n    } else {\n      this.setState({\n        activeSlide: 0\n      });\n      sessionStorage.setItem(\"slide\", \"0\");\n    } // end scroll to previous page slide\n\n\n    this._isMobile = isMobileDevice();\n\n    if (this._isMobile) {\n      document.addEventListener(\"touchmove\", this.onTouchMove, {\n        passive: false\n      });\n      document.addEventListener(\"touchstart\", this.onTouchStart);\n    } else {\n      document.addEventListener(\"wheel\", this.onScroll, {\n        passive: false\n      });\n    }\n\n    window.addEventListener(\"resize\", this.onResize);\n    const casePageScrollItems = document.getElementsByClassName(\"caseScroll\");\n    caseSidebarEventListener(casePageScrollItems, this.scrollToSlide, this.scrollToSlideTablet);\n    clientsAboutUsBtnEventListeners(this.scrollToSlide);\n    this.onResize(); //hide scrollbar\n\n    document.body.style.overflow = \"hidden\";\n  }\n\n  componentDidUpdate() {\n    if (this._scrollMode == \"normal\") {\n      document.body.style.overflow = \"visible\";\n    }\n\n    if (this._scrollMode == \"full-page\") {\n      document.body.style.overflow = \"hidden\";\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._isMobile) {\n      document.removeEventListener(\"touchmove\", this.onTouchMove);\n      document.removeEventListener(\"touchstart\", this.onTouchStart);\n    } else {\n      document.removeEventListener(\"wheel\", this.onScroll);\n    }\n\n    window.removeEventListener(\"resize\", this.onResize);\n    document.body.style.overflow = \"visible\";\n    sessionStorage.setItem(\"scrollY\", window.scrollY);\n  }\n\n  renderControls() {\n    const {\n      controls,\n      controlsProps,\n      titles\n    } = this.props;\n    if (!controls) return null;\n    const controlsBasicProps = {\n      activeSlide: this.state.activeSlide,\n      getCurrentSlideIndex: this.getCurrentSlideIndex,\n      onNext: this.scrollNext,\n      onPrev: this.scrollPrev,\n      scrollToSlide: this.scrollToSlide,\n      slidesCount: this.getSlidesCount(),\n      titles\n    };\n\n    if (controls === true) {\n      return /*#__PURE__*/_jsxDEV(ScrollControls, _objectSpread(_objectSpread({}, controlsBasicProps), controlsProps), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 14\n      }, this);\n    }\n\n    const CustomControls = controls;\n    return /*#__PURE__*/_jsxDEV(CustomControls, _objectSpread(_objectSpread({}, controlsBasicProps), controlsProps), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 12\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classNames(S.Scroll, this.props.className, this._scrollMode === scrollMode.NORMAL ? S[\"Scroll--normal\"] : \"\"),\n      children: [this.renderControls(), this.props.children, !this.props.router.asPath.includes(\"our-work\") && !this.props.router.asPath.includes(\"get-started\") && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: S.mouseWrapper,\n        onClick: () => this.scrollToSlide(1),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: S.mouse,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Scroll\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n_defineProperty(Scroll, \"propTypes\", {\n  afterChange: PropTypes.func,\n  beforeChange: PropTypes.func,\n  children: PropTypes.node.isRequired,\n  controls: PropTypes.oneOfType([PropTypes.bool, PropTypes.element, PropTypes.func]),\n  controlsProps: PropTypes.object,\n  duration: PropTypes.number,\n  initialSlide: PropTypes.number,\n  additionalElements: PropTypes.number,\n  titles: PropTypes.array\n});\n\n_defineProperty(Scroll, \"defaultProps\", {\n  afterChange: () => {},\n  beforeChange: () => {},\n  controls: true,\n  controlsProps: {},\n  duration: 1000,\n  initialSlide: 0,\n  additionalElements: 1\n});\n\n_defineProperty(Scroll, \"getChildrenCount\", children => {\n  const childrenArr = React.Children.toArray(children);\n  const slides = childrenArr.filter(({\n    type\n  }) => type === ScrollSection);\n  return slides.length;\n});\n\nexport default withRouter(Scroll);","map":{"version":3,"sources":["E:/corporate-website/components/Scroll/Scroll.jsx"],"names":["React","classNames","withRouter","PropTypes","animatedScrollTo","isMobileDevice","getObjectValues","S","caseSidebarEventListener","clientsAboutUsBtnEventListeners","ScrollSection","ScrollControls","scrollMode","FULL_PAGE","NORMAL","Scroll","Component","constructor","props","_slides","window","innerWidth","innerHeight","_scrollMode","i","_slidesCount","push","setState","height","evt","_touchStart","touches","clientY","_isScrolledAlready","preventDefault","touchEnd","changedTouches","_isScrollPending","_touchSensitivity","scrollToSlide","state","activeSlide","scrollDown","wheelDelta","deltaY","detail","slide","currentSlide","beforeChange","from","to","sessionStorage","setItem","duration","afterChange","elem","document","getElementById","scrollIntoView","block","behavior","getChildrenCount","children","additionalElements","_isMobile","initialSlide","componentDidMount","shouldScrollRestore","JSON","parse","getItem","scrollPos","router","asPath","scroll","y","addEventListener","onTouchMove","passive","onTouchStart","onScroll","onResize","casePageScrollItems","getElementsByClassName","scrollToSlideTablet","body","style","overflow","componentDidUpdate","componentWillUnmount","removeEventListener","scrollY","renderControls","controls","controlsProps","titles","controlsBasicProps","getCurrentSlideIndex","onNext","scrollNext","onPrev","scrollPrev","slidesCount","getSlidesCount","CustomControls","render","className","includes","mouseWrapper","mouse","func","node","isRequired","oneOfType","bool","element","object","number","array","childrenArr","Children","toArray","slides","filter","type","length"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { withRouter } from \"next/router\";\r\n// utils\r\nimport PropTypes from \"prop-types\";\r\nimport animatedScrollTo from \"./utils/animated-scroll-to\";\r\nimport isMobileDevice from \"./utils/is-mobile\";\r\nimport { getObjectValues } from \"./utils/helpers\";\r\nimport S from \"./style/scroll.module.scss\";\r\nimport {\r\n  caseSidebarEventListener,\r\n  clientsAboutUsBtnEventListeners\r\n} from \"./utils/eventListeners\";\r\n\r\n// Components\r\nimport ScrollSection from \"./ScrollSection\";\r\nimport ScrollControls from \"./ScrollControls\";\r\n\r\nconst scrollMode = {\r\n  FULL_PAGE: \"full-page\",\r\n  NORMAL: \"normal\",\r\n};\r\n\r\nexport class Scroll extends React.Component {\r\n  static propTypes = {\r\n    afterChange: PropTypes.func,\r\n    beforeChange: PropTypes.func,\r\n    children: PropTypes.node.isRequired,\r\n    controls: PropTypes.oneOfType([\r\n      PropTypes.bool,\r\n      PropTypes.element,\r\n      PropTypes.func,\r\n    ]),\r\n    controlsProps: PropTypes.object,\r\n    duration: PropTypes.number,\r\n    initialSlide: PropTypes.number,\r\n    additionalElements: PropTypes.number,\r\n    titles: PropTypes.array,\r\n  };\r\n\r\n  static defaultProps = {\r\n    afterChange: () => { },\r\n    beforeChange: () => { },\r\n    controls: true,\r\n    controlsProps: {},\r\n    duration: 1000,\r\n    initialSlide: 0,\r\n    additionalElements: 1,\r\n  };\r\n\r\n  static getChildrenCount = (children) => {\r\n    const childrenArr = React.Children.toArray(children);\r\n    const slides = childrenArr.filter(({ type }) => type === ScrollSection);\r\n    return slides.length;\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this._isScrollPending = false;\r\n    this._isScrolledAlready = false;\r\n    this._slides = [];\r\n    this._slidesCount =\r\n      Scroll.getChildrenCount(this.props.children) +\r\n      this.props.additionalElements;\r\n    this._touchSensitivity = 5;\r\n    this._touchStart = 0;\r\n    this._isMobile = null;\r\n    this._scrollMode = scrollMode.FULL_PAGE;\r\n    this.state = {\r\n      activeSlide: props.initialSlide,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // scroll to previous page slide\r\n    const shouldScrollRestore = JSON.parse(\r\n      sessionStorage.getItem(\"shouldScrollRestore\")\r\n    );\r\n    const scrollPos = JSON.parse(\r\n      sessionStorage.getItem(this.props.router.asPath)\r\n    );\r\n\r\n    if (shouldScrollRestore && scrollPos) {\r\n      this.setState({\r\n        activeSlide: +scrollPos.slide,\r\n      });\r\n      sessionStorage.setItem(\"slide\", scrollPos.slide);\r\n\r\n      if (window.innerWidth < 1200) {\r\n        window.scroll(0, +scrollPos.y)\r\n      }\r\n\r\n    } else {\r\n      this.setState({\r\n        activeSlide: 0,\r\n      });\r\n      sessionStorage.setItem(\"slide\", \"0\");\r\n    }\r\n    // end scroll to previous page slide\r\n\r\n    this._isMobile = isMobileDevice();\r\n    if (this._isMobile) {\r\n      document.addEventListener(\"touchmove\", this.onTouchMove, {\r\n        passive: false,\r\n      });\r\n      document.addEventListener(\"touchstart\", this.onTouchStart);\r\n    } else {\r\n      document.addEventListener(\"wheel\", this.onScroll, { passive: false });\r\n    }\r\n    window.addEventListener(\"resize\", this.onResize);\r\n\r\n    const casePageScrollItems = document.getElementsByClassName(\"caseScroll\");\r\n    caseSidebarEventListener(casePageScrollItems, this.scrollToSlide, this.scrollToSlideTablet);\r\n    clientsAboutUsBtnEventListeners(this.scrollToSlide)\r\n\r\n    this.onResize();\r\n    //hide scrollbar\r\n    document.body.style.overflow = \"hidden\";\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this._scrollMode == \"normal\") {\r\n      document.body.style.overflow = \"visible\";\r\n    }\r\n    if (this._scrollMode == \"full-page\") {\r\n      document.body.style.overflow = \"hidden\";\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this._isMobile) {\r\n      document.removeEventListener(\"touchmove\", this.onTouchMove);\r\n      document.removeEventListener(\"touchstart\", this.onTouchStart);\r\n    } else {\r\n      document.removeEventListener(\"wheel\", this.onScroll);\r\n    }\r\n    window.removeEventListener(\"resize\", this.onResize);\r\n\r\n    document.body.style.overflow = \"visible\";\r\n    sessionStorage.setItem(\"scrollY\", window.scrollY);\r\n  }\r\n\r\n  onResize = () => {\r\n    this._slides = [];\r\n\r\n    if (window.innerWidth < 1200 || window.innerHeight < 411) {\r\n      this._scrollMode = scrollMode.NORMAL;\r\n    } else this._scrollMode = scrollMode.FULL_PAGE;\r\n\r\n    for (let i = 0; i < this._slidesCount; i++) {\r\n      this._slides.push(window.innerHeight * i);\r\n    }\r\n\r\n    this.setState({\r\n      height: window.innerHeight,\r\n    });\r\n  };\r\n\r\n  onTouchStart = (evt) => {\r\n    this._touchStart = evt.touches[0].clientY;\r\n    this._isScrolledAlready = false;\r\n  };\r\n\r\n  onTouchMove = (evt) => {\r\n    if (this._scrollMode !== scrollMode.FULL_PAGE) {\r\n      return;\r\n    }\r\n\r\n    evt.preventDefault();\r\n    const touchEnd = evt.changedTouches[0].clientY;\r\n\r\n    if (!this._isScrollPending && !this._isScrolledAlready) {\r\n      if (this._touchStart > touchEnd + this._touchSensitivity) {\r\n        this.scrollToSlide(this.state.activeSlide + 1);\r\n      } else if (this._touchStart < touchEnd - this._touchSensitivity) {\r\n        this.scrollToSlide(this.state.activeSlide - 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  onScroll = (evt) => {\r\n    if (this._scrollMode !== scrollMode.FULL_PAGE) {\r\n      return;\r\n    }\r\n\r\n    evt.preventDefault();\r\n    if (this._isScrollPending) {\r\n      return;\r\n    }\r\n\r\n    const scrollDown = (evt.wheelDelta || -evt.deltaY || -evt.detail) < 0;\r\n\r\n    if (scrollDown) {\r\n      this.scrollToSlide(this.state.activeSlide + 1);\r\n    } else {\r\n      this.scrollToSlide(this.state.activeSlide - 1);\r\n    }\r\n  };\r\n\r\n  getSlidesCount = () => this._slidesCount;\r\n\r\n  getCurrentSlideIndex = () => this.state.activeSlide;\r\n\r\n  scrollNext = () => {\r\n    this.scrollToSlide(this.state.activeSlide + 1);\r\n  };\r\n\r\n  scrollPrev = () => {\r\n    this.scrollToSlide(this.state.activeSlide - 1);\r\n  };\r\n\r\n  scrollToSlide = (slide) => {\r\n    if (!this._isScrollPending && slide >= 0 && slide < this._slidesCount) {\r\n      const currentSlide = this.state.activeSlide;\r\n      this.props.beforeChange({ from: currentSlide, to: slide });\r\n\r\n      sessionStorage.setItem(\"slide\", slide);\r\n      this.setState({\r\n        activeSlide: slide,\r\n      });\r\n\r\n      this._isScrollPending = true;\r\n      animatedScrollTo(this._slides[slide], this.props.duration, () => {\r\n        this._isScrollPending = false;\r\n        this._isScrolledAlready = true;\r\n\r\n        this.props.afterChange({ from: currentSlide, to: slide });\r\n      });\r\n    }\r\n  }\r\n\r\n  scrollToSlideTablet = (slide) => {\r\n    const elem = document.getElementById(`caseSection-${slide}`)\r\n    this.setState({\r\n      activeSlide: slide,\r\n    });\r\n    sessionStorage.setItem(\"slide\", slide);\r\n    elem.scrollIntoView({ block: \"start\", behavior: \"smooth\" })\r\n  }\r\n\r\n  renderControls() {\r\n    const { controls, controlsProps, titles } = this.props;\r\n\r\n    if (!controls) return null;\r\n\r\n    const controlsBasicProps = {\r\n      activeSlide: this.state.activeSlide,\r\n      getCurrentSlideIndex: this.getCurrentSlideIndex,\r\n      onNext: this.scrollNext,\r\n      onPrev: this.scrollPrev,\r\n      scrollToSlide: this.scrollToSlide,\r\n      slidesCount: this.getSlidesCount(),\r\n      titles,\r\n    };\r\n    if (controls === true) {\r\n      return <ScrollControls {...controlsBasicProps} {...controlsProps} />;\r\n    }\r\n    const CustomControls = controls;\r\n    return <CustomControls {...controlsBasicProps} {...controlsProps} />;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={classNames(\r\n          S.Scroll,\r\n          this.props.className,\r\n          this._scrollMode === scrollMode.NORMAL ? S[\"Scroll--normal\"] : \"\"\r\n        )}\r\n      >\r\n        {this.renderControls()}\r\n        {this.props.children}\r\n        {!this.props.router.asPath.includes(\"our-work\") &&\r\n          !this.props.router.asPath.includes(\"get-started\") && (\r\n            <div\r\n              className={S.mouseWrapper}\r\n              onClick={() => this.scrollToSlide(1)}\r\n            >\r\n              <div className={S.mouse}>\r\n                <p>Scroll</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Scroll);\r\n"]},"metadata":{},"sourceType":"module"}