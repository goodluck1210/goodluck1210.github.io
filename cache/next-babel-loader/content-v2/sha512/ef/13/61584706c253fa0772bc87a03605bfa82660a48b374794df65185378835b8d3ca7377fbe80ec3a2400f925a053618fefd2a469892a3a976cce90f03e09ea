{"ast":null,"code":"var _jsxFileName = \"E:\\\\corporate-website\\\\pages\\\\blog\\\\index.js\";\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport Fuse from 'fuse.js';\nimport { useDebouncedCallback } from 'use-debounce';\nimport validator from '../../utils/validation/validateEmail';\nimport { MainLayoutBorders } from '../../components/MainLayout/MainLayoutBorders';\nimport ArticlePreview from '../../components/Blog/ArticlePreview/ArticlePreview';\nimport Subscription from '../../components/Blog/Subscription/Subscription';\nimport Header from '../../components/Blog/Header/Header';\nimport PaginationComp from '../../components/Blog/Pagination/Pagination';\nimport CTA from '../../components/ReusableComponents/CTA/CTA';\nimport blogArticles from '../../assets/data/blogArticles.json';\nimport { en } from '../../config/en.js';\nimport { meta } from '../../config/metadata';\nimport routing from '../../config/routing';\nimport SubscriptionService from '../../services/subscription';\nimport { fuseOptions, blogFilters } from '../../config/constants';\nimport styles from '../../styles/pages/blog.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Blog({\n  blogArticles,\n  canonicalLink\n}) {\n  const {\n    blog,\n    receiveNotifications,\n    subscribe\n  } = en;\n  let filteredByCategories = [];\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: search,\n    1: setSearch\n  } = useState('');\n  const {\n    0: debouncedSearch,\n    1: setDebouncedSearch\n  } = useState('');\n  const {\n    0: error,\n    1: setError\n  } = useState('');\n  const {\n    0: isConfirmed,\n    1: setConfirmed\n  } = useState(false);\n  const router = useRouter();\n  const {\n    query,\n    pathname,\n    asPath\n  } = router; //pagination\n\n  const pageNumber = query.page ? Number(query.page) : 1;\n  const PER_PAGE = 12;\n  const {\n    0: firstSliceValue,\n    1: setFirstSliceValue\n  } = useState(0);\n  const {\n    0: secondSliceValue,\n    1: setSecondSliceValue\n  } = useState(PER_PAGE);\n  useEffect(() => {\n    if (pageNumber > Math.ceil(filteredByCategories.length / PER_PAGE) || asPath.includes('page=1')) {\n      router.replace(pathname);\n    }\n  }, []);\n  useEffect(() => {\n    setFirstSliceValue(pageNumber * PER_PAGE - PER_PAGE);\n    setSecondSliceValue(pageNumber * PER_PAGE);\n  }, [pageNumber]); // end pagination\n\n  const category = router.pathname === routing().blog ? blogFilters[0].name : router.pathname.replace(`${routing().blog}/`, '');\n  const uppercaseCategory = `${category[0].toUpperCase()}${category.slice(1)}`;\n  const currentArticle = blogFilters.find(item => item.name === category); // filtration by search or categories\n\n  blogArticles.filter(article => {\n    if (category === blogFilters[0].name) {\n      filteredByCategories.push(article);\n    }\n\n    if (article.category.some(cat => cat.toLowerCase() === category)) {\n      filteredByCategories.push(article);\n    }\n\n    if (search === '') {\n      return blogArticles;\n    }\n\n    if (debouncedSearch) {\n      const fuse = new Fuse(filteredByCategories, fuseOptions);\n      filteredByCategories = fuse.search(debouncedSearch).map(el => el.item);\n      return filteredByCategories;\n    }\n\n    return filteredByCategories;\n  });\n  const handleDebounseSearch = useDebouncedCallback(value => {\n    setDebouncedSearch(value);\n  }, 400);\n\n  const handleSearchChange = value => {\n    setSearch(value);\n    handleDebounseSearch.callback(value);\n  };\n\n  const handleSubscriptionChange = ({\n    target\n  }) => {\n    if (error) {\n      setError('');\n    }\n\n    setEmail(target.value);\n  };\n\n  useEffect(() => {\n    if (validator.validate(email)) {\n      setError('');\n    }\n  }, [email]);\n\n  const handleSubmit = () => {\n    if (validator.validate(email)) {\n      SubscriptionService.subscribe(email, setConfirmed, setEmail, setError);\n    } else {\n      setError('Invalid email address!');\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(MainLayoutBorders, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: [currentArticle.metaTitle || `Software Development Company Blog ${uppercaseCategory}`, ' ', \"- Page \", pageNumber, \" | WTT Solutions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: `${meta.blogDescription} ${uppercaseCategory === 'All' ? '' : `- ${uppercaseCategory}`} | Page ${pageNumber}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"canonical\",\n        href: canonicalLink || 'https://wtt-solutions.com/blog'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.headerWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.blog,\n        children: [blog, \" \", uppercaseCategory !== 'All' ? uppercaseCategory : '', ' ', (uppercaseCategory === 'All' || uppercaseCategory === 'Insights') && `page ${pageNumber}`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        handleChange: e => handleSearchChange(e.target.value),\n        setSearchValue: setSearch,\n        searchValue: search\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.contentWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.middleLine\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.deskLines,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ArticlePreview, {\n        data: filteredByCategories.slice(firstSliceValue, secondSliceValue),\n        searchValue: debouncedSearch,\n        activeFilter: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), filteredByCategories.length > PER_PAGE && /*#__PURE__*/_jsxDEV(PaginationComp, {\n        pathname: pathname,\n        totalPages: Math.ceil(filteredByCategories.length / PER_PAGE),\n        pageNumber: pageNumber\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Subscription, {\n        error: error,\n        emailValue: email,\n        handleChange: handleSubscriptionChange,\n        handleSubmit: handleSubmit,\n        title: receiveNotifications,\n        btnTitle: subscribe,\n        isConfirmed: isConfirmed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CTA, {\n      CTATitle: en.CTATitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\nexport async function getServerSideProps() {\n  blogArticles.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime() //sort articles by date\n  );\n  return {\n    props: {\n      blogArticles\n    }\n  };\n}\nexport default Blog;","map":{"version":3,"sources":["E:/corporate-website/pages/blog/index.js"],"names":["useState","useEffect","Head","useRouter","Fuse","useDebouncedCallback","validator","MainLayoutBorders","ArticlePreview","Subscription","Header","PaginationComp","CTA","blogArticles","en","meta","routing","SubscriptionService","fuseOptions","blogFilters","styles","Blog","canonicalLink","blog","receiveNotifications","subscribe","filteredByCategories","email","setEmail","search","setSearch","debouncedSearch","setDebouncedSearch","error","setError","isConfirmed","setConfirmed","router","query","pathname","asPath","pageNumber","page","Number","PER_PAGE","firstSliceValue","setFirstSliceValue","secondSliceValue","setSecondSliceValue","Math","ceil","length","includes","replace","category","name","uppercaseCategory","toUpperCase","slice","currentArticle","find","item","filter","article","push","some","cat","toLowerCase","fuse","map","el","handleDebounseSearch","value","handleSearchChange","callback","handleSubscriptionChange","target","validate","handleSubmit","metaTitle","blogDescription","headerWrapper","e","contentWrapper","middleLine","deskLines","CTATitle","getServerSideProps","sort","a","b","Date","date","getTime","props"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Head from 'next/head';\r\nimport { useRouter } from 'next/router';\r\nimport Fuse from 'fuse.js';\r\nimport { useDebouncedCallback } from 'use-debounce';\r\nimport validator from '../../utils/validation/validateEmail';\r\n\r\nimport { MainLayoutBorders } from '../../components/MainLayout/MainLayoutBorders';\r\nimport ArticlePreview from '../../components/Blog/ArticlePreview/ArticlePreview';\r\nimport Subscription from '../../components/Blog/Subscription/Subscription';\r\nimport Header from '../../components/Blog/Header/Header';\r\nimport PaginationComp from '../../components/Blog/Pagination/Pagination';\r\nimport CTA from '../../components/ReusableComponents/CTA/CTA';\r\n\r\nimport blogArticles from '../../assets/data/blogArticles.json';\r\nimport { en } from '../../config/en.js';\r\nimport { meta } from '../../config/metadata';\r\nimport routing from '../../config/routing';\r\nimport SubscriptionService from '../../services/subscription';\r\nimport { fuseOptions, blogFilters } from '../../config/constants';\r\n\r\nimport styles from '../../styles/pages/blog.module.scss';\r\n\r\nfunction Blog({ blogArticles, canonicalLink }) {\r\n  const { blog, receiveNotifications, subscribe } = en;\r\n  let filteredByCategories = [];\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [search, setSearch] = useState('');\r\n  const [debouncedSearch, setDebouncedSearch] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isConfirmed, setConfirmed] = useState(false);\r\n\r\n  const router = useRouter();\r\n  const { query, pathname, asPath } = router;\r\n\r\n  //pagination\r\n  const pageNumber = query.page ? Number(query.page) : 1;\r\n  const PER_PAGE = 12;\r\n  const [firstSliceValue, setFirstSliceValue] = useState(0);\r\n  const [secondSliceValue, setSecondSliceValue] = useState(PER_PAGE);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pageNumber > Math.ceil(filteredByCategories.length / PER_PAGE) ||\r\n      asPath.includes('page=1')\r\n    ) {\r\n      router.replace(pathname);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFirstSliceValue(pageNumber * PER_PAGE - PER_PAGE);\r\n    setSecondSliceValue(pageNumber * PER_PAGE);\r\n  }, [pageNumber]);\r\n\r\n  // end pagination\r\n\r\n  const category =\r\n    router.pathname === routing().blog\r\n      ? blogFilters[0].name\r\n      : router.pathname.replace(`${routing().blog}/`, '');\r\n  const uppercaseCategory = `${category[0].toUpperCase()}${category.slice(1)}`;\r\n  const currentArticle = blogFilters.find((item) => item.name === category);\r\n\r\n  // filtration by search or categories\r\n  blogArticles.filter((article) => {\r\n    if (category === blogFilters[0].name) {\r\n      filteredByCategories.push(article);\r\n    }\r\n    if (article.category.some((cat) => cat.toLowerCase() === category)) {\r\n      filteredByCategories.push(article);\r\n    }\r\n    if (search === '') {\r\n      return blogArticles;\r\n    }\r\n    if (debouncedSearch) {\r\n      const fuse = new Fuse(filteredByCategories, fuseOptions);\r\n      filteredByCategories = fuse.search(debouncedSearch).map((el) => el.item);\r\n      return filteredByCategories;\r\n    }\r\n    return filteredByCategories;\r\n  });\r\n\r\n  const handleDebounseSearch = useDebouncedCallback((value) => {\r\n    setDebouncedSearch(value);\r\n  }, 400);\r\n\r\n  const handleSearchChange = (value) => {\r\n    setSearch(value);\r\n    handleDebounseSearch.callback(value);\r\n  };\r\n\r\n  const handleSubscriptionChange = ({ target }) => {\r\n    if (error) {\r\n      setError('');\r\n    }\r\n    setEmail(target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (validator.validate(email)) {\r\n      setError('');\r\n    }\r\n  }, [email]);\r\n\r\n  const handleSubmit = () => {\r\n    if (validator.validate(email)) {\r\n      SubscriptionService.subscribe(email, setConfirmed, setEmail, setError);\r\n    } else {\r\n      setError('Invalid email address!');\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainLayoutBorders>\r\n      <Head>\r\n        <title>\r\n          {currentArticle.metaTitle ||\r\n            `Software Development Company Blog ${uppercaseCategory}`}{' '}\r\n          - Page {pageNumber} | WTT Solutions\r\n        </title>\r\n        <meta\r\n          name=\"description\"\r\n          content={`${meta.blogDescription} ${\r\n            uppercaseCategory === 'All' ? '' : `- ${uppercaseCategory}`\r\n          } | Page ${pageNumber}`}\r\n        />\r\n        <link\r\n          rel=\"canonical\"\r\n          href={canonicalLink || 'https://wtt-solutions.com/blog'}\r\n        />\r\n      </Head>\r\n      <div className={styles.headerWrapper}>\r\n        <h1 className={styles.blog}>\r\n          {blog} {uppercaseCategory !== 'All' ? uppercaseCategory : ''}{' '}\r\n          {(uppercaseCategory === 'All' || uppercaseCategory === 'Insights') &&\r\n            `page ${pageNumber}`}\r\n        </h1>\r\n        <Header\r\n          handleChange={(e) => handleSearchChange(e.target.value)}\r\n          setSearchValue={setSearch}\r\n          searchValue={search}\r\n        />\r\n      </div>\r\n      <div className={styles.contentWrapper}>\r\n        <div className={styles.middleLine}></div>\r\n        <div className={styles.deskLines}>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n\r\n        <ArticlePreview\r\n          data={filteredByCategories.slice(firstSliceValue, secondSliceValue)}\r\n          searchValue={debouncedSearch}\r\n          activeFilter={category}\r\n        />\r\n\r\n        {filteredByCategories.length > PER_PAGE && (\r\n          <PaginationComp\r\n            pathname={pathname}\r\n            totalPages={Math.ceil(filteredByCategories.length / PER_PAGE)}\r\n            pageNumber={pageNumber}\r\n          />\r\n        )}\r\n\r\n        <Subscription\r\n          error={error}\r\n          emailValue={email}\r\n          handleChange={handleSubscriptionChange}\r\n          handleSubmit={handleSubmit}\r\n          title={receiveNotifications}\r\n          btnTitle={subscribe}\r\n          isConfirmed={isConfirmed}\r\n        />\r\n      </div>\r\n      <CTA CTATitle={en.CTATitle} />\r\n    </MainLayoutBorders>\r\n  );\r\n}\r\n\r\nexport async function getServerSideProps() {\r\n  blogArticles.sort(\r\n    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime() //sort articles by date\r\n  );\r\n  return {\r\n    props: {\r\n      blogArticles,\r\n    },\r\n  };\r\n}\r\n\r\nexport default Blog;\r\n"]},"metadata":{},"sourceType":"module"}