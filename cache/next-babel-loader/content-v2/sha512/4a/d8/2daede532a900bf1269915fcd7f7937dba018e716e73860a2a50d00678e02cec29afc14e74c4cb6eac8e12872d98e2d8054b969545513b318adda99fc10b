{"ast":null,"code":"import _classCallCheck from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"E:/corporate-website/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\corporate-website\\\\components\\\\Scroll\\\\Scroll.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { withRouter } from \"next/router\"; // utils\n\nimport PropTypes from \"prop-types\";\nimport animatedScrollTo from \"./utils/animated-scroll-to\";\nimport isMobileDevice from \"./utils/is-mobile\";\nimport { getObjectValues } from \"./utils/helpers\";\nimport S from \"./style/scroll.module.scss\";\nimport { caseSidebarEventListener, clientsAboutUsBtnEventListeners } from \"./utils/eventListeners\"; // Components\n\nimport ScrollSection from \"./ScrollSection\";\nimport ScrollControls from \"./ScrollControls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar scrollMode = {\n  FULL_PAGE: \"full-page\",\n  NORMAL: \"normal\"\n};\nexport var Scroll = /*#__PURE__*/function (_React$Component) {\n  _inherits(Scroll, _React$Component);\n\n  var _super = _createSuper(Scroll);\n\n  function Scroll(props) {\n    var _this;\n\n    _classCallCheck(this, Scroll);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function () {\n      _this._slides = [];\n\n      if (window.innerWidth < 1200 || window.innerHeight < 411) {\n        _this._scrollMode = scrollMode.NORMAL;\n      } else _this._scrollMode = scrollMode.FULL_PAGE;\n\n      for (var i = 0; i < _this._slidesCount; i++) {\n        _this._slides.push(window.innerHeight * i);\n      }\n\n      _this.setState({\n        height: window.innerHeight\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchStart\", function (evt) {\n      _this._touchStart = evt.touches[0].clientY;\n      _this._isScrolledAlready = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchMove\", function (evt) {\n      if (_this._scrollMode !== scrollMode.FULL_PAGE) {\n        return;\n      }\n\n      evt.preventDefault();\n      var touchEnd = evt.changedTouches[0].clientY;\n\n      if (!_this._isScrollPending && !_this._isScrolledAlready) {\n        if (_this._touchStart > touchEnd + _this._touchSensitivity) {\n          _this.scrollToSlide(_this.state.activeSlide + 1);\n        } else if (_this._touchStart < touchEnd - _this._touchSensitivity) {\n          _this.scrollToSlide(_this.state.activeSlide - 1);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onScroll\", function (evt) {\n      if (_this._scrollMode !== scrollMode.FULL_PAGE) {\n        return;\n      }\n\n      evt.preventDefault();\n\n      if (_this._isScrollPending) {\n        return;\n      }\n\n      var scrollDown = (evt.wheelDelta || -evt.deltaY || -evt.detail) < 0;\n\n      if (scrollDown) {\n        _this.scrollToSlide(_this.state.activeSlide + 1);\n      } else {\n        _this.scrollToSlide(_this.state.activeSlide - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSlidesCount\", function () {\n      return _this._slidesCount;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCurrentSlideIndex\", function () {\n      return _this.state.activeSlide;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollNext\", function () {\n      _this.scrollToSlide(_this.state.activeSlide + 1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollPrev\", function () {\n      _this.scrollToSlide(_this.state.activeSlide - 1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollToSlide\", function (slide) {\n      if (!_this._isScrollPending && slide >= 0 && slide < _this._slidesCount) {\n        var currentSlide = _this.state.activeSlide;\n\n        _this.props.beforeChange({\n          from: currentSlide,\n          to: slide\n        });\n\n        sessionStorage.setItem(\"slide\", slide);\n\n        _this.setState({\n          activeSlide: slide\n        });\n\n        _this._isScrollPending = true;\n        animatedScrollTo(_this._slides[slide], _this.props.duration, function () {\n          _this._isScrollPending = false;\n          _this._isScrolledAlready = true;\n\n          _this.props.afterChange({\n            from: currentSlide,\n            to: slide\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollToSlideTablet\", function (slide) {\n      var elem = document.getElementById(\"caseSection-\".concat(slide));\n\n      _this.setState({\n        activeSlide: slide\n      });\n\n      sessionStorage.setItem(\"slide\", slide);\n      elem.scrollIntoView({\n        block: \"start\",\n        behavior: \"smooth\"\n      });\n    });\n\n    _this._isScrollPending = false;\n    _this._isScrolledAlready = false;\n    _this._slides = [];\n    _this._slidesCount = Scroll.getChildrenCount(_this.props.children) + _this.props.additionalElements;\n    _this._touchSensitivity = 5;\n    _this._touchStart = 0;\n    _this._isMobile = null;\n    _this._scrollMode = scrollMode.FULL_PAGE;\n    _this.state = {\n      activeSlide: props.initialSlide\n    };\n    return _this;\n  }\n\n  _createClass(Scroll, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // scroll to previous page slide\n      var shouldScrollRestore = JSON.parse(sessionStorage.getItem(\"shouldScrollRestore\"));\n      var scrollPos = JSON.parse(sessionStorage.getItem(this.props.router.asPath));\n\n      if (shouldScrollRestore && scrollPos) {\n        this.setState({\n          activeSlide: +scrollPos.slide\n        });\n        sessionStorage.setItem(\"slide\", scrollPos.slide);\n\n        if (window.innerWidth < 1200) {\n          window.scroll(0, +scrollPos.y);\n        }\n      } else {\n        this.setState({\n          activeSlide: 0\n        });\n        sessionStorage.setItem(\"slide\", \"0\");\n      } // end scroll to previous page slide\n\n\n      this._isMobile = isMobileDevice();\n\n      if (this._isMobile) {\n        document.addEventListener(\"touchmove\", this.onTouchMove, {\n          passive: false\n        });\n        document.addEventListener(\"touchstart\", this.onTouchStart);\n      } else {\n        document.addEventListener(\"wheel\", this.onScroll, {\n          passive: false\n        });\n      }\n\n      window.addEventListener(\"resize\", this.onResize);\n      var casePageScrollItems = document.getElementsByClassName(\"caseScroll\");\n      caseSidebarEventListener(casePageScrollItems, this.scrollToSlide, this.scrollToSlideTablet);\n      clientsAboutUsBtnEventListeners(this.scrollToSlide);\n      this.onResize(); //hide scrollbar\n\n      document.body.style.overflow = \"hidden\";\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this._scrollMode == \"normal\") {\n        document.body.style.overflow = \"visible\";\n      }\n\n      if (this._scrollMode == \"full-page\") {\n        document.body.style.overflow = \"hidden\";\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this._isMobile) {\n        document.removeEventListener(\"touchmove\", this.onTouchMove);\n        document.removeEventListener(\"touchstart\", this.onTouchStart);\n      } else {\n        document.removeEventListener(\"wheel\", this.onScroll);\n      }\n\n      window.removeEventListener(\"resize\", this.onResize);\n      document.body.style.overflow = \"visible\";\n      sessionStorage.setItem(\"scrollY\", window.scrollY);\n    }\n  }, {\n    key: \"renderControls\",\n    value: function renderControls() {\n      var _this$props = this.props,\n          controls = _this$props.controls,\n          controlsProps = _this$props.controlsProps,\n          titles = _this$props.titles;\n      if (!controls) return null;\n      var controlsBasicProps = {\n        activeSlide: this.state.activeSlide,\n        getCurrentSlideIndex: this.getCurrentSlideIndex,\n        onNext: this.scrollNext,\n        onPrev: this.scrollPrev,\n        scrollToSlide: this.scrollToSlide,\n        slidesCount: this.getSlidesCount(),\n        titles: titles\n      };\n\n      if (controls === true) {\n        return /*#__PURE__*/_jsxDEV(ScrollControls, _objectSpread(_objectSpread({}, controlsBasicProps), controlsProps), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 14\n        }, this);\n      }\n\n      var CustomControls = controls;\n      return /*#__PURE__*/_jsxDEV(CustomControls, _objectSpread(_objectSpread({}, controlsBasicProps), controlsProps), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 12\n      }, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classNames(S.Scroll, this.props.className, this._scrollMode === scrollMode.NORMAL ? S[\"Scroll--normal\"] : \"\"),\n        children: [this.renderControls(), this.props.children, !this.props.router.asPath.includes(\"our-work\") && !this.props.router.asPath.includes(\"get-started\") && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: S.mouseWrapper,\n          onClick: function onClick() {\n            return _this2.scrollToSlide(1);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: S.mouse,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Scroll\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Scroll;\n}(React.Component);\n\n_defineProperty(Scroll, \"propTypes\", {\n  afterChange: PropTypes.func,\n  beforeChange: PropTypes.func,\n  children: PropTypes.node.isRequired,\n  controls: PropTypes.oneOfType([PropTypes.bool, PropTypes.element, PropTypes.func]),\n  controlsProps: PropTypes.object,\n  duration: PropTypes.number,\n  initialSlide: PropTypes.number,\n  additionalElements: PropTypes.number,\n  titles: PropTypes.array\n});\n\n_defineProperty(Scroll, \"defaultProps\", {\n  afterChange: function afterChange() {},\n  beforeChange: function beforeChange() {},\n  controls: true,\n  controlsProps: {},\n  duration: 1000,\n  initialSlide: 0,\n  additionalElements: 1\n});\n\n_defineProperty(Scroll, \"getChildrenCount\", function (children) {\n  var childrenArr = React.Children.toArray(children);\n  var slides = childrenArr.filter(function (_ref) {\n    var type = _ref.type;\n    return type === ScrollSection;\n  });\n  return slides.length;\n});\n\nexport default _c = withRouter(Scroll);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["E:/corporate-website/components/Scroll/Scroll.jsx"],"names":["React","classNames","withRouter","PropTypes","animatedScrollTo","isMobileDevice","getObjectValues","S","caseSidebarEventListener","clientsAboutUsBtnEventListeners","ScrollSection","ScrollControls","scrollMode","FULL_PAGE","NORMAL","Scroll","props","_slides","window","innerWidth","innerHeight","_scrollMode","i","_slidesCount","push","setState","height","evt","_touchStart","touches","clientY","_isScrolledAlready","preventDefault","touchEnd","changedTouches","_isScrollPending","_touchSensitivity","scrollToSlide","state","activeSlide","scrollDown","wheelDelta","deltaY","detail","slide","currentSlide","beforeChange","from","to","sessionStorage","setItem","duration","afterChange","elem","document","getElementById","scrollIntoView","block","behavior","getChildrenCount","children","additionalElements","_isMobile","initialSlide","shouldScrollRestore","JSON","parse","getItem","scrollPos","router","asPath","scroll","y","addEventListener","onTouchMove","passive","onTouchStart","onScroll","onResize","casePageScrollItems","getElementsByClassName","scrollToSlideTablet","body","style","overflow","removeEventListener","scrollY","controls","controlsProps","titles","controlsBasicProps","getCurrentSlideIndex","onNext","scrollNext","onPrev","scrollPrev","slidesCount","getSlidesCount","CustomControls","className","renderControls","includes","mouseWrapper","mouse","Component","func","node","isRequired","oneOfType","bool","element","object","number","array","childrenArr","Children","toArray","slides","filter","type","length"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { withRouter } from \"next/router\";\r\n// utils\r\nimport PropTypes from \"prop-types\";\r\nimport animatedScrollTo from \"./utils/animated-scroll-to\";\r\nimport isMobileDevice from \"./utils/is-mobile\";\r\nimport { getObjectValues } from \"./utils/helpers\";\r\nimport S from \"./style/scroll.module.scss\";\r\nimport {\r\n  caseSidebarEventListener,\r\n  clientsAboutUsBtnEventListeners\r\n} from \"./utils/eventListeners\";\r\n\r\n// Components\r\nimport ScrollSection from \"./ScrollSection\";\r\nimport ScrollControls from \"./ScrollControls\";\r\n\r\nconst scrollMode = {\r\n  FULL_PAGE: \"full-page\",\r\n  NORMAL: \"normal\",\r\n};\r\n\r\nexport class Scroll extends React.Component {\r\n  static propTypes = {\r\n    afterChange: PropTypes.func,\r\n    beforeChange: PropTypes.func,\r\n    children: PropTypes.node.isRequired,\r\n    controls: PropTypes.oneOfType([\r\n      PropTypes.bool,\r\n      PropTypes.element,\r\n      PropTypes.func,\r\n    ]),\r\n    controlsProps: PropTypes.object,\r\n    duration: PropTypes.number,\r\n    initialSlide: PropTypes.number,\r\n    additionalElements: PropTypes.number,\r\n    titles: PropTypes.array,\r\n  };\r\n\r\n  static defaultProps = {\r\n    afterChange: () => { },\r\n    beforeChange: () => { },\r\n    controls: true,\r\n    controlsProps: {},\r\n    duration: 1000,\r\n    initialSlide: 0,\r\n    additionalElements: 1,\r\n  };\r\n\r\n  static getChildrenCount = (children) => {\r\n    const childrenArr = React.Children.toArray(children);\r\n    const slides = childrenArr.filter(({ type }) => type === ScrollSection);\r\n    return slides.length;\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this._isScrollPending = false;\r\n    this._isScrolledAlready = false;\r\n    this._slides = [];\r\n    this._slidesCount =\r\n      Scroll.getChildrenCount(this.props.children) +\r\n      this.props.additionalElements;\r\n    this._touchSensitivity = 5;\r\n    this._touchStart = 0;\r\n    this._isMobile = null;\r\n    this._scrollMode = scrollMode.FULL_PAGE;\r\n    this.state = {\r\n      activeSlide: props.initialSlide,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // scroll to previous page slide\r\n    const shouldScrollRestore = JSON.parse(\r\n      sessionStorage.getItem(\"shouldScrollRestore\")\r\n    );\r\n    const scrollPos = JSON.parse(\r\n      sessionStorage.getItem(this.props.router.asPath)\r\n    );\r\n\r\n    if (shouldScrollRestore && scrollPos) {\r\n      this.setState({\r\n        activeSlide: +scrollPos.slide,\r\n      });\r\n      sessionStorage.setItem(\"slide\", scrollPos.slide);\r\n\r\n      if (window.innerWidth < 1200) {\r\n        window.scroll(0, +scrollPos.y)\r\n      }\r\n\r\n    } else {\r\n      this.setState({\r\n        activeSlide: 0,\r\n      });\r\n      sessionStorage.setItem(\"slide\", \"0\");\r\n    }\r\n    // end scroll to previous page slide\r\n\r\n    this._isMobile = isMobileDevice();\r\n    if (this._isMobile) {\r\n      document.addEventListener(\"touchmove\", this.onTouchMove, {\r\n        passive: false,\r\n      });\r\n      document.addEventListener(\"touchstart\", this.onTouchStart);\r\n    } else {\r\n      document.addEventListener(\"wheel\", this.onScroll, { passive: false });\r\n    }\r\n    window.addEventListener(\"resize\", this.onResize);\r\n\r\n    const casePageScrollItems = document.getElementsByClassName(\"caseScroll\");\r\n    caseSidebarEventListener(casePageScrollItems, this.scrollToSlide, this.scrollToSlideTablet);\r\n    clientsAboutUsBtnEventListeners(this.scrollToSlide)\r\n\r\n    this.onResize();\r\n    //hide scrollbar\r\n    document.body.style.overflow = \"hidden\";\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this._scrollMode == \"normal\") {\r\n      document.body.style.overflow = \"visible\";\r\n    }\r\n    if (this._scrollMode == \"full-page\") {\r\n      document.body.style.overflow = \"hidden\";\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this._isMobile) {\r\n      document.removeEventListener(\"touchmove\", this.onTouchMove);\r\n      document.removeEventListener(\"touchstart\", this.onTouchStart);\r\n    } else {\r\n      document.removeEventListener(\"wheel\", this.onScroll);\r\n    }\r\n    window.removeEventListener(\"resize\", this.onResize);\r\n\r\n    document.body.style.overflow = \"visible\";\r\n    sessionStorage.setItem(\"scrollY\", window.scrollY);\r\n  }\r\n\r\n  onResize = () => {\r\n    this._slides = [];\r\n\r\n    if (window.innerWidth < 1200 || window.innerHeight < 411) {\r\n      this._scrollMode = scrollMode.NORMAL;\r\n    } else this._scrollMode = scrollMode.FULL_PAGE;\r\n\r\n    for (let i = 0; i < this._slidesCount; i++) {\r\n      this._slides.push(window.innerHeight * i);\r\n    }\r\n\r\n    this.setState({\r\n      height: window.innerHeight,\r\n    });\r\n  };\r\n\r\n  onTouchStart = (evt) => {\r\n    this._touchStart = evt.touches[0].clientY;\r\n    this._isScrolledAlready = false;\r\n  };\r\n\r\n  onTouchMove = (evt) => {\r\n    if (this._scrollMode !== scrollMode.FULL_PAGE) {\r\n      return;\r\n    }\r\n\r\n    evt.preventDefault();\r\n    const touchEnd = evt.changedTouches[0].clientY;\r\n\r\n    if (!this._isScrollPending && !this._isScrolledAlready) {\r\n      if (this._touchStart > touchEnd + this._touchSensitivity) {\r\n        this.scrollToSlide(this.state.activeSlide + 1);\r\n      } else if (this._touchStart < touchEnd - this._touchSensitivity) {\r\n        this.scrollToSlide(this.state.activeSlide - 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  onScroll = (evt) => {\r\n    if (this._scrollMode !== scrollMode.FULL_PAGE) {\r\n      return;\r\n    }\r\n\r\n    evt.preventDefault();\r\n    if (this._isScrollPending) {\r\n      return;\r\n    }\r\n\r\n    const scrollDown = (evt.wheelDelta || -evt.deltaY || -evt.detail) < 0;\r\n\r\n    if (scrollDown) {\r\n      this.scrollToSlide(this.state.activeSlide + 1);\r\n    } else {\r\n      this.scrollToSlide(this.state.activeSlide - 1);\r\n    }\r\n  };\r\n\r\n  getSlidesCount = () => this._slidesCount;\r\n\r\n  getCurrentSlideIndex = () => this.state.activeSlide;\r\n\r\n  scrollNext = () => {\r\n    this.scrollToSlide(this.state.activeSlide + 1);\r\n  };\r\n\r\n  scrollPrev = () => {\r\n    this.scrollToSlide(this.state.activeSlide - 1);\r\n  };\r\n\r\n  scrollToSlide = (slide) => {\r\n    if (!this._isScrollPending && slide >= 0 && slide < this._slidesCount) {\r\n      const currentSlide = this.state.activeSlide;\r\n      this.props.beforeChange({ from: currentSlide, to: slide });\r\n\r\n      sessionStorage.setItem(\"slide\", slide);\r\n      this.setState({\r\n        activeSlide: slide,\r\n      });\r\n\r\n      this._isScrollPending = true;\r\n      animatedScrollTo(this._slides[slide], this.props.duration, () => {\r\n        this._isScrollPending = false;\r\n        this._isScrolledAlready = true;\r\n\r\n        this.props.afterChange({ from: currentSlide, to: slide });\r\n      });\r\n    }\r\n  }\r\n\r\n  scrollToSlideTablet = (slide) => {\r\n    const elem = document.getElementById(`caseSection-${slide}`)\r\n    this.setState({\r\n      activeSlide: slide,\r\n    });\r\n    sessionStorage.setItem(\"slide\", slide);\r\n    elem.scrollIntoView({ block: \"start\", behavior: \"smooth\" })\r\n  }\r\n\r\n  renderControls() {\r\n    const { controls, controlsProps, titles } = this.props;\r\n\r\n    if (!controls) return null;\r\n\r\n    const controlsBasicProps = {\r\n      activeSlide: this.state.activeSlide,\r\n      getCurrentSlideIndex: this.getCurrentSlideIndex,\r\n      onNext: this.scrollNext,\r\n      onPrev: this.scrollPrev,\r\n      scrollToSlide: this.scrollToSlide,\r\n      slidesCount: this.getSlidesCount(),\r\n      titles,\r\n    };\r\n    if (controls === true) {\r\n      return <ScrollControls {...controlsBasicProps} {...controlsProps} />;\r\n    }\r\n    const CustomControls = controls;\r\n    return <CustomControls {...controlsBasicProps} {...controlsProps} />;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={classNames(\r\n          S.Scroll,\r\n          this.props.className,\r\n          this._scrollMode === scrollMode.NORMAL ? S[\"Scroll--normal\"] : \"\"\r\n        )}\r\n      >\r\n        {this.renderControls()}\r\n        {this.props.children}\r\n        {!this.props.router.asPath.includes(\"our-work\") &&\r\n          !this.props.router.asPath.includes(\"get-started\") && (\r\n            <div\r\n              className={S.mouseWrapper}\r\n              onClick={() => this.scrollToSlide(1)}\r\n            >\r\n              <div className={S.mouse}>\r\n                <p>Scroll</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Scroll);\r\n"]},"metadata":{},"sourceType":"module"}