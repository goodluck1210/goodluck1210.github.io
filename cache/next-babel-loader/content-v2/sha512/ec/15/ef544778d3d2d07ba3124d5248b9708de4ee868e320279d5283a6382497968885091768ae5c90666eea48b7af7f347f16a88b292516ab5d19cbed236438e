{"ast":null,"code":"import { useEffect } from 'react';\nimport Router from 'next/router';\n\nfunction saveScrollPos(url, shouldScrollRestore) {\n  if (window.innerWidth > 1199) {\n    var slide = sessionStorage.getItem('slide');\n    var scrollPos = {\n      y: window.innerHeight * slide,\n      slide: slide\n    };\n    sessionStorage.setItem(url, JSON.stringify(scrollPos));\n    sessionStorage.setItem('shouldScrollRestore', shouldScrollRestore || false);\n  } else {\n    var scrollY = sessionStorage.getItem('scrollY');\n    var _scrollPos = {\n      y: scrollY\n    };\n    sessionStorage.setItem(url, JSON.stringify(_scrollPos));\n  }\n}\n\nfunction restoreScrollPos(url) {\n  var scrollPos = JSON.parse(sessionStorage.getItem(url));\n\n  if (scrollPos && !url.includes('blog')) {\n    window.scrollTo({\n      top: scrollPos.y\n    });\n  }\n}\n\nexport default function useScrollRestoration(router) {\n  useEffect(function () {\n    if ('scrollRestoration' in window.history) {\n      var shouldScrollRestore = false;\n      window.history.scrollRestoration = 'manual';\n      restoreScrollPos(router.asPath);\n\n      var onBeforeUnload = function onBeforeUnload(event) {\n        saveScrollPos(router.asPath);\n        delete event['returnValue'];\n      };\n\n      var onRouteChangeStart = function onRouteChangeStart() {\n        saveScrollPos(router.asPath, shouldScrollRestore);\n      };\n\n      var onRouteChangeComplete = function onRouteChangeComplete(url) {\n        if (shouldScrollRestore) {\n          shouldScrollRestore = false;\n          restoreScrollPos(url);\n        }\n      };\n\n      window.addEventListener('beforeunload', onBeforeUnload);\n      Router.events.on('routeChangeStart', onRouteChangeStart);\n      Router.events.on('routeChangeComplete', onRouteChangeComplete);\n      Router.beforePopState(function () {\n        shouldScrollRestore = true;\n        return true;\n      });\n      return function () {\n        window.removeEventListener('beforeunload', onBeforeUnload);\n        Router.events.off('routeChangeStart', onRouteChangeStart);\n        Router.events.off('routeChangeComplete', onRouteChangeComplete);\n        Router.beforePopState(function () {\n          return true;\n        });\n      };\n    }\n  }, [router]);\n}","map":null,"metadata":{},"sourceType":"module"}